<?xml version="1.0"?>
<model xmlns="http://www.neeveresearch.com/schema/x-ddl" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
    <buses>
        <bus name="processor" descriptor="${processor.bus.descriptor::direct://processor}">
            <channels>
                <channel name="requests" id="1"/>
                <channel name="events" id="2"/>
            </channels>
        </bus>
    </buses>

    <apps>
        <app name="processor" mainClass="com.neeve.samples.dbintegration.receivergateway.app.App">
            <messaging>
                <factories>
                    <factory name="com.neeve.samples.dbintegration.receivergateway.app.messages.MessageFactory"/>
                </factories>
                <bus name="processor">
                    <channels>
                        <channel name="requests" join="true"/>
                        <channel name="events" join="false"/>
                    </channels>
                </bus>
            </messaging>
        </app>

        <app name="gateway" mainClass="com.neeve.samples.dbintegration.receivergateway.gateway.App">
            <messaging>
                <factories>
                    <factory name="com.neeve.samples.dbintegration.receivergateway.app.messages.MessageFactory"/>
                </factories>
                <bus name="processor">
                    <channels>
                        <channel name="requests" join="false"/>
                        <channel name="events" join="true"/>
                    </channels>
                </bus>
            </messaging>
        </app>

        <app name="driver" mainClass="com.neeve.samples.dbintegration.receivergateway.driver.App">
            <messaging>
                <factories>
                    <factory name="com.neeve.samples.dbintegration.receivergateway.app.messages.MessageFactory"/>
                </factories>
                <bus name="processor">
                    <channels>
                        <channel name="requests" join="false"/>
                        <channel name="events" join="false"/>
                    </channels>
                </bus>
            </messaging>
        </app>
    </apps>

    <servers>
        <server name="processor">
            <apps>
                <app name="processor" autoStart="true"/>
            </apps>           
            <heartbeats enabled="true" interval="10">
                <tracing enabled="true">
                    <traceAdminClientStats>false</traceAdminClientStats>
                    <traceAppStats>false</traceAppStats>
                    <tracePoolStats>false</tracePoolStats>
                    <traceSysStats>false</traceSysStats>
                    <traceThreadStats>false</traceThreadStats>
                    <traceUserStats>true</traceUserStats>
                </tracing>
            </heartbeats>
        </server>

        <server name="gateway">
            <apps>
                <app name="gateway" autoStart="true"/>
            </apps>           
            <heartbeats enabled="true" interval="10">
                <tracing enabled="true">
                    <traceAdminClientStats>false</traceAdminClientStats>
                    <traceAppStats>false</traceAppStats>
                    <tracePoolStats>false</tracePoolStats>
                    <traceSysStats>false</traceSysStats>
                    <traceThreadStats>false</traceThreadStats>
                    <traceUserStats>true</traceUserStats>
                </tracing>
            </heartbeats>
        </server>

        <server name="driver">
            <apps>
                <app name="driver" autoStart="true"/>
            </apps>           
            <heartbeats enabled="true" interval="10">
                <tracing enabled="true">
                    <traceAdminClientStats>false</traceAdminClientStats>
                    <traceAppStats>false</traceAppStats>
                    <tracePoolStats>false</tracePoolStats>
                    <traceSysStats>false</traceSysStats>
                    <traceThreadStats>false</traceThreadStats>
                    <traceUserStats>true</traceUserStats>
                </tracing>
            </heartbeats>
        </server>
    </servers>
</model>
